const _0x50b991=_0x3f4b;(function(_0x5d9753,_0x329442){const _0x3c9863=_0x3f4b,_0x16741e=_0x5d9753();while(!![]){try{const _0x5db3d1=parseInt(_0x3c9863(0x137))/0x1*(parseInt(_0x3c9863(0x124))/0x2)+parseInt(_0x3c9863(0x10e))/0x3+parseInt(_0x3c9863(0x116))/0x4+parseInt(_0x3c9863(0x127))/0x5*(-parseInt(_0x3c9863(0x11f))/0x6)+-parseInt(_0x3c9863(0x11b))/0x7*(-parseInt(_0x3c9863(0x10c))/0x8)+parseInt(_0x3c9863(0x13c))/0x9+-parseInt(_0x3c9863(0x115))/0xa;if(_0x5db3d1===_0x329442)break;else _0x16741e['push'](_0x16741e['shift']());}catch(_0x3cc8ca){_0x16741e['push'](_0x16741e['shift']());}}}(_0x1bda,0x729cf));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x50b991(0x126)),ff=require(_0x50b991(0x112)),ffmpegPath=require(_0x50b991(0x145))['path'],webp=require(_0x50b991(0x135)),path=require('path');ff['setFfmpegPath'](ffmpegPath);async function imageToWebp(_0x1d4b81){const _0x55c896=_0x50b991,_0x231706=path['join'](tmpdir(),Crypto[_0x55c896(0x136)](0x6)[_0x55c896(0x130)](0x0,0x6)[_0x55c896(0x13a)](0x24)+'.webp'),_0x1b8d59=path[_0x55c896(0x119)](tmpdir(),Crypto[_0x55c896(0x136)](0x6)[_0x55c896(0x130)](0x0,0x6)[_0x55c896(0x13a)](0x24)+_0x55c896(0x141));fs[_0x55c896(0x11c)](_0x1b8d59,_0x1d4b81),await new Promise((_0x2f198b,_0x1ae864)=>{const _0x5b3b95=_0x55c896;ff(_0x1b8d59)['on']('error',_0x1ae864)['on'](_0x5b3b95(0x120),()=>_0x2f198b(!![]))[_0x5b3b95(0x10d)](['-vcodec',_0x5b3b95(0x118),_0x5b3b95(0x133),_0x5b3b95(0x111)])[_0x5b3b95(0x13f)](_0x5b3b95(0x11d))[_0x5b3b95(0x11e)](_0x231706);});const _0x4b679b=fs[_0x55c896(0x128)](_0x231706);return fs[_0x55c896(0x131)](_0x231706),fs[_0x55c896(0x131)](_0x1b8d59),_0x4b679b;}async function videoToWebp(_0x378547){const _0x11cd3c=_0x50b991,_0x22cc69=path[_0x11cd3c(0x119)](tmpdir(),Crypto[_0x11cd3c(0x136)](0x6)[_0x11cd3c(0x130)](0x0,0x6)['toString'](0x24)+_0x11cd3c(0x110)),_0x39317d=path['join'](tmpdir(),Crypto[_0x11cd3c(0x136)](0x6)['readUIntLE'](0x0,0x6)[_0x11cd3c(0x13a)](0x24)+_0x11cd3c(0x142));fs[_0x11cd3c(0x11c)](_0x39317d,_0x378547),await new Promise((_0x498e2d,_0x439f1d)=>{const _0x25a377=_0x11cd3c;ff(_0x39317d)['on'](_0x25a377(0x13e),_0x439f1d)['on'](_0x25a377(0x120),()=>_0x498e2d(!![]))[_0x25a377(0x10d)]([_0x25a377(0x12f),_0x25a377(0x118),_0x25a377(0x133),_0x25a377(0x111),_0x25a377(0x12c),'0',_0x25a377(0x122),_0x25a377(0x12e),'-t',_0x25a377(0x144),'-preset',_0x25a377(0x121),_0x25a377(0x13b),_0x25a377(0x11a),'0'])['toFormat'](_0x25a377(0x11d))['save'](_0x22cc69);});const _0x5b1e6d=fs[_0x11cd3c(0x128)](_0x22cc69);return fs[_0x11cd3c(0x131)](_0x22cc69),fs['unlinkSync'](_0x39317d),_0x5b1e6d;}async function writeExifImg(_0x14ab77,_0x348e0c){const _0x26c0b0=_0x50b991;let _0x3083ac=await imageToWebp(_0x14ab77);const _0x28a4e2=path[_0x26c0b0(0x119)](tmpdir(),Crypto[_0x26c0b0(0x136)](0x6)['readUIntLE'](0x0,0x6)[_0x26c0b0(0x13a)](0x24)+_0x26c0b0(0x110)),_0x43fd86=path['join'](tmpdir(),Crypto[_0x26c0b0(0x136)](0x6)['readUIntLE'](0x0,0x6)[_0x26c0b0(0x13a)](0x24)+_0x26c0b0(0x110));fs[_0x26c0b0(0x11c)](_0x28a4e2,_0x3083ac);if(_0x348e0c['packname']||_0x348e0c['author']){const _0x3c0f71=new webp[(_0x26c0b0(0x12d))](),_0x2aff09={'sticker-pack-id':_0x26c0b0(0x12a),'sticker-pack-name':_0x348e0c[_0x26c0b0(0x146)],'sticker-pack-publisher':_0x348e0c[_0x26c0b0(0x140)],'emojis':_0x348e0c[_0x26c0b0(0x138)]?_0x348e0c[_0x26c0b0(0x138)]:['']},_0x314cbb=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x524e2d=Buffer[_0x26c0b0(0x143)](JSON[_0x26c0b0(0x114)](_0x2aff09),'utf-8'),_0x31a02a=Buffer[_0x26c0b0(0x147)]([_0x314cbb,_0x524e2d]);return _0x31a02a[_0x26c0b0(0x117)](_0x524e2d[_0x26c0b0(0x125)],0xe,0x4),await _0x3c0f71[_0x26c0b0(0x13d)](_0x28a4e2),fs['unlinkSync'](_0x28a4e2),_0x3c0f71[_0x26c0b0(0x113)]=_0x31a02a,await _0x3c0f71[_0x26c0b0(0x11e)](_0x43fd86),_0x43fd86;}}async function writeExifVid(_0x3069f8,_0x488d6e){const _0x32bd2c=_0x50b991;let _0x4e140a=await videoToWebp(_0x3069f8);const _0x4c57e3=path[_0x32bd2c(0x119)](tmpdir(),Crypto[_0x32bd2c(0x136)](0x6)[_0x32bd2c(0x130)](0x0,0x6)['toString'](0x24)+_0x32bd2c(0x110)),_0x1646a8=path[_0x32bd2c(0x119)](tmpdir(),Crypto[_0x32bd2c(0x136)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+'.webp');fs['writeFileSync'](_0x4c57e3,_0x4e140a);if(_0x488d6e[_0x32bd2c(0x146)]||_0x488d6e[_0x32bd2c(0x140)]){const _0xbfbfbb=new webp[(_0x32bd2c(0x12d))](),_0x442006={'sticker-pack-id':_0x32bd2c(0x12a),'sticker-pack-name':_0x488d6e[_0x32bd2c(0x146)],'sticker-pack-publisher':_0x488d6e[_0x32bd2c(0x140)],'emojis':_0x488d6e['categories']?_0x488d6e[_0x32bd2c(0x138)]:['']},_0x48ba8c=Buffer[_0x32bd2c(0x143)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x473954=Buffer[_0x32bd2c(0x143)](JSON[_0x32bd2c(0x114)](_0x442006),_0x32bd2c(0x132)),_0x2447f6=Buffer['concat']([_0x48ba8c,_0x473954]);return _0x2447f6[_0x32bd2c(0x117)](_0x473954[_0x32bd2c(0x125)],0xe,0x4),await _0xbfbfbb[_0x32bd2c(0x13d)](_0x4c57e3),fs[_0x32bd2c(0x131)](_0x4c57e3),_0xbfbfbb[_0x32bd2c(0x113)]=_0x2447f6,await _0xbfbfbb['save'](_0x1646a8),_0x1646a8;}}function _0x3f4b(_0x173b10,_0x3e699a){const _0x1bda12=_0x1bda();return _0x3f4b=function(_0x3f4bad,_0x5144ae){_0x3f4bad=_0x3f4bad-0x10c;let _0x96c271=_0x1bda12[_0x3f4bad];return _0x96c271;},_0x3f4b(_0x173b10,_0x3e699a);}function _0x1bda(){const _0x1ae6db=['utf-8','-vf','test','node-webpmux','randomBytes','257ORzyKR','categories','utf8','toString','-an','7998183fRrgmt','load','error','toFormat','author','.jpg','.mp4','from','00:00:05','@ffmpeg-installer/ffmpeg','packname','concat','6088fwCNNG','addOutputOptions','1431753SWYNoh','mimetype','.webp','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','fluent-ffmpeg','exif','stringify','18645600lTTvYc','1327952NeqgUq','writeUIntLE','libwebp','join','-vsync','1778YZHqFZ','writeFileSync','webp','save','6XSEKiI','end','default','-ss','exports','6896rWWivs','length','crypto','2216705LfVsvH','readFileSync','util','https://github.com/DGXeon','data','-loop','Image','00:00:00','-vcodec','readUIntLE','unlinkSync'];_0x1bda=function(){return _0x1ae6db;};return _0x1bda();}async function writeExif(_0xfffb6,_0x341c5c){const _0x226bf5=_0x50b991;let _0x2b899a=/webp/['test'](_0xfffb6[_0x226bf5(0x10f)])?_0xfffb6['data']:/image/[_0x226bf5(0x134)](_0xfffb6[_0x226bf5(0x10f)])?await imageToWebp(_0xfffb6[_0x226bf5(0x12b)]):/video/[_0x226bf5(0x134)](_0xfffb6[_0x226bf5(0x10f)])?await videoToWebp(_0xfffb6[_0x226bf5(0x12b)]):'';const _0x2d4bee=path[_0x226bf5(0x119)](tmpdir(),Crypto[_0x226bf5(0x136)](0x6)[_0x226bf5(0x130)](0x0,0x6)[_0x226bf5(0x13a)](0x24)+'.webp'),_0x27f437=path['join'](tmpdir(),Crypto[_0x226bf5(0x136)](0x6)[_0x226bf5(0x130)](0x0,0x6)[_0x226bf5(0x13a)](0x24)+_0x226bf5(0x110));fs[_0x226bf5(0x11c)](_0x2d4bee,_0x2b899a);if(_0x341c5c[_0x226bf5(0x146)]||_0x341c5c[_0x226bf5(0x140)]){const _0x42f0da=new webp['Image'](),_0x23753d={'sticker-pack-id':_0x226bf5(0x12a),'sticker-pack-name':_0x341c5c[_0x226bf5(0x146)],'sticker-pack-publisher':_0x341c5c[_0x226bf5(0x140)],'emojis':_0x341c5c[_0x226bf5(0x138)]?_0x341c5c[_0x226bf5(0x138)]:['']},_0x3efaaf=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0xb73c09=Buffer['from'](JSON[_0x226bf5(0x114)](_0x23753d),_0x226bf5(0x132)),_0x31f708=Buffer['concat']([_0x3efaaf,_0xb73c09]);return _0x31f708[_0x226bf5(0x117)](_0xb73c09[_0x226bf5(0x125)],0xe,0x4),await _0x42f0da[_0x226bf5(0x13d)](_0x2d4bee),fs['unlinkSync'](_0x2d4bee),_0x42f0da[_0x226bf5(0x113)]=_0x31f708,await _0x42f0da[_0x226bf5(0x11e)](_0x27f437),_0x27f437;}}const {Image}=require(_0x50b991(0x135)),{format}=require(_0x50b991(0x129));async function addExif(_0x4c31b0,_0x20aeb0,_0x3778d2,_0x26eabc=[''],_0x206f6a={}){const _0x4a8ec5=_0x50b991,_0x1d3cc0=new Image(),_0x338e5f={'sticker-pack-id':'DGXeon','sticker-pack-name':_0x20aeb0,'sticker-pack-publisher':_0x3778d2,'emojis':_0x26eabc,'is-avatar-sticker':0x1,..._0x206f6a};let _0x2bb8ee=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x573c82=Buffer[_0x4a8ec5(0x143)](JSON[_0x4a8ec5(0x114)](_0x338e5f),_0x4a8ec5(0x139)),_0x453bf8=Buffer[_0x4a8ec5(0x147)]([_0x2bb8ee,_0x573c82]);return _0x453bf8[_0x4a8ec5(0x117)](_0x573c82[_0x4a8ec5(0x125)],0xe,0x4),await _0x1d3cc0['load'](_0x4c31b0),_0x1d3cc0[_0x4a8ec5(0x113)]=_0x453bf8,await _0x1d3cc0[_0x4a8ec5(0x11e)](null);}module[_0x50b991(0x123)]={'addExif':addExif,'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};